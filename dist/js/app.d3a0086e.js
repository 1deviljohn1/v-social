(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0edc":function(t,e,s){},"0f6d":function(t,e,s){t.exports=s.p+"img/chat-empty.28d1d6db.svg"},"13ed":function(t,e,s){"use strict";var a=s("0edc"),r=s.n(a);r.a},"276c":function(t,e,s){},"320c":function(t,e,s){t.exports=s.p+"img/placeholder-photo.119a0e2f.svg"},"415b":function(t,e,s){},"43e5":function(t,e,s){t.exports=s.p+"img/logo-main.73b2fe90.svg"},"444d":function(t,e,s){"use strict";var a=s("bf8d"),r=s.n(a);r.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id="4678"},"4cab":function(t,e,s){"use strict";var a=s("9267"),r=s.n(a);r.a},"4dc3":function(t,e,s){},"53e3":function(t,e,s){"use strict";var a=s("769e"),r=s.n(a);r.a},"568f":function(t,e,s){"use strict";var a=s("c494"),r=s.n(a);r.a},"569e":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("4de4"),s("96cf");var a=s("1da1"),r=(s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("2b0e")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.isLoading?s("Loader"):t._e(),"Auth"===t.$route.name?s("div",[s("router-view")],1):s("div",[s("Nabvar"),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s3"},[s("Sidenav"),t.currentUserData.subscriptions.length?s("Subscriptions",{key:t.currentUserData.subscriptions.length}):t._e()],1),s("div",{staticClass:"col s9"},[s("router-view",{key:t.$route.fullPath})],1)])])],1)],1)},i=[],o=s("5530"),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loader"},[s("div",{staticClass:"preloader-wrapper active"},[s("div",{staticClass:"spinner-layer"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])}],u={name:"Loader"},d=u,f=(s("7e46"),s("2877")),p=Object(f["a"])(d,c,l,!1,null,null,null),m=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar-fixed"},[a("ul",{staticClass:"dropdown-content",attrs:{id:"navbar-actions"}},[a("li",[a("a",{on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[a("i",{staticClass:"material-icons"},[t._v("exit_to_app")]),t._v("Выйти")])])]),a("nav",[a("div",{staticClass:"nav-wrapper"},[a("img",{attrs:{src:s("a266"),alt:""}}),a("ul",{staticClass:"right"},[a("li",[a("a",{ref:"navbar-actions",staticClass:"avatar flex-center",attrs:{"data-target":"navbar-actions"}},[a("span",[t._v(t._s(t.currentUserData.alias))]),a("Badge",{attrs:{alias:t.currentUserData.alias,photoUrl:t.currentUserData.photoUrl}}),a("i",{staticClass:"material-icons right"},[t._v("arrow_drop_down")])],1)])])])])])},v=[],g=s("2f62"),b=s("4d5c"),C=s.n(b),j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"badge-wrapper"},[t.photoUrl?s("img",{staticClass:"badge",style:t.style,attrs:{src:t.photoUrl}}):s("strong",{staticClass:"badge",class:{invert:t.invertColor},style:t.style},[t._v(" "+t._s(t.alias&&t.alias.substr(0,2))+" ")]),t.followIcon?s("i",{staticClass:"material-icons follow-icon white-text"},[t._v("people")]):t._e(),t.firstUserIcon?s("i",{staticClass:"material-icons first-user-icon white-text"},[t._v("star")]):t._e()])},w=[],_=(s("99af"),{name:"Badge",props:["photoUrl","alias","invertColor","size","followIcon","firstUserIcon"],computed:{style:function(){return"width: ".concat(this.size,"px; height: ").concat(this.size,"px")}}}),U=_,x=(s("71b1"),Object(f["a"])(U,j,w,!1,null,null,null)),D=x.exports,O={name:"Navbar",data:function(){return{user:{}}},components:{Badge:D},methods:Object(o["a"])({},Object(g["b"])(["logoutUser"]),{signOut:function(){this.logoutUser()}}),computed:Object(o["a"])({},Object(g["c"])(["currentUserData"])),mounted:function(){C.a.Dropdown.init(this.$refs["navbar-actions"],{coverTrigger:!1})}},y=O,P=(s("53e3"),Object(f["a"])(y,h,v,!1,null,"b4a1e2ae",null)),k=P.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidenav-static"},[s("ul",{staticClass:"card collection"},[s("router-link",{staticClass:"collection-item",attrs:{to:"/"}},[s("i",{staticClass:"material-icons"},[t._v("home")]),t._v("Новости")]),s("router-link",{staticClass:"collection-item",attrs:{to:{name:"Profile",params:{alias:t.currentUserData.alias}}}},[s("i",{staticClass:"material-icons"},[t._v("account_circle")]),t._v("Профиль")]),s("router-link",{staticClass:"collection-item",attrs:{to:"/users"}},[s("i",{staticClass:"material-icons"},[t._v("people")]),t._v("Люди")])],1)])},A=[],S={name:"Sidenav",computed:Object(o["a"])({},Object(g["c"])(["currentUserData"]))},M=S,E=(s("9be6"),Object(f["a"])(M,L,A,!1,null,"4da578a2",null)),R=E.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subscriptions"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("p",{staticClass:"subscriptions-title"},[t._v("Вы подписаны")]),t.isComponentLoading?s("ComponentLoader"):s("UsersList",{attrs:{users:t.users,columnSize:"50%"}})],1)])])},F=[],z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-list"},t._l(t.users,(function(e){return s("router-link",{key:e.id,staticClass:"user-item black-text center-align",style:t.style,attrs:{to:{name:"Profile",params:{alias:e.alias}}}},[s("Badge",{attrs:{size:t.badgeSize,alias:e.alias,photoUrl:e.photoUrl,invertColor:!0,followIcon:t.showIcon&&t.isSubscribed(e.alias),firstUserIcon:t.showIcon&&e.isFirstUser}}),s("p",[t._v(t._s(e.alias))])],1)})),1)},$=[],N=(s("caad"),s("2532"),{name:"UsersList",props:["users","badgeSize","showIcon","columnSize"],components:{Badge:D},computed:Object(o["a"])({},Object(g["c"])(["currentUserData"]),{style:function(){return"flex-basis: ".concat(this.columnSize)}}),methods:{isSubscribed:function(t){return this.currentUserData.subscriptions.includes(t)}}}),T=N,B=(s("568f"),Object(f["a"])(T,z,$,!1,null,null,null)),G=B.exports,H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"component-loader center-align"},[s("div",{staticClass:"preloader-wrapper active"},[s("div",{staticClass:"spinner-layer spinner-blue-only"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])}],Y={name:"ComponentLoader"},W=Y,Z=(s("444d"),Object(f["a"])(W,H,K,!1,null,null,null)),V=Z.exports,J={name:"Subscriptons",components:{UsersList:G,ComponentLoader:V},data:function(){return{users:[],isComponentLoading:!1}},methods:Object(o["a"])({},Object(g["b"])(["fetchUsers"])),computed:Object(o["a"])({},Object(g["c"])(["currentUserData"])),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isComponentLoading=!0,e.next=3,t.fetchUsers(t.currentUserData.subscriptions);case 3:t.users=e.sent,t.isComponentLoading=!1;case 5:case"end":return e.stop()}}),e)})))()}},q=J,X=(s("69e5"),Object(f["a"])(q,I,F,!1,null,null,null)),Q=X.exports,tt={name:"App",components:{Loader:m,Nabvar:k,Sidenav:R,Subscriptions:Q},computed:Object(o["a"])({},Object(g["c"])(["isLoading","currentUserData"]))},et=tt,st=Object(f["a"])(et,n,i,!1,null,null,null),at=st.exports,rt=(s("45fc"),s("8c4f")),nt=s("8aa5"),it=s.n(nt),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth"},[a("img",{staticClass:"auth-logo",attrs:{src:s("43e5"),alt:""}}),a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[t.login?a("LoginForm",{on:{toggleForm:t.toggleForm}}):a("SigninForm",{on:{toggleForm:t.toggleForm}})],1)])])},ct=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"white col s12",on:{submit:function(e){return e.preventDefault(),t.authUser(e)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("email")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{id:"login_email",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{attrs:{for:"login_email"}},[t._v("Эл. почта")])]),s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("lock")]),s("i",{staticClass:"material-icons prefix prefix-right grey-text",on:{click:function(e){t.showPassword=!t.showPassword}}},[t._v(t._s(t.togglePassword))]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{id:"login_password",type:t.showPassword?"text":"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{attrs:{for:"login_password"}},[t._v("Пароль")])]),t.authCode?s("p",{staticClass:"center red-text"},[t._v(" "+t._s(t._f("convertAuthCode")(t.authCode))+" ")]):t._e(),s("div",{staticClass:"input-field col s12"},[s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit"}},[t._v(" Войти ")]),s("a",{staticClass:"btn-flat ttn",on:{click:t.toggleForm}},[t._v("Ты еще не с нами?")])])])])},ut=[],dt={name:"LoginForm",data:function(){return{email:"",password:"",showPassword:!1}},methods:Object(o["a"])({},Object(g["b"])(["loginUser"]),{},Object(g["d"])(["setAuthCode","setLoading"]),{toggleForm:function(){this.$emit("toggleForm")},authUser:function(){var t=this;if(this.email&&this.password){this.setAuthCode(""),this.setLoading(!0);var e={email:this.email,password:this.password};this.loginUser(e).then((function(){t.setLoading(!1)}))}else this.setAuthCode("auth/empty-data")}}),computed:Object(o["a"])({},Object(g["c"])(["authCode"]),{togglePassword:function(){return this.showPassword?"visibility_on":"visibility_off"}})},ft=dt,pt=Object(f["a"])(ft,lt,ut,!1,null,null,null),mt=pt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"white col s12",on:{submit:function(e){return e.preventDefault(),t.authUser(e)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("account_circle")]),s("i",{ref:"tooltip",staticClass:"tooltipped material-icons prefix prefix-right grey-text",attrs:{"data-position":"top","data-tooltip":t._f("convertAuthCode")(t.aliasRule)}},[t._v("info_outline")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.alias,expression:"alias",modifiers:{trim:!0}}],attrs:{id:"signin_alias",type:"text"},domProps:{value:t.alias},on:{input:function(e){e.target.composing||(t.alias=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{attrs:{for:"signin_alias"}},[t._v("Псевдоним")])]),s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("date_range")]),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.dob,expression:"dob",modifiers:{lazy:!0}}],ref:"datepicker",staticClass:"datepicker",attrs:{readonly:"",id:"signin_dob",type:"text"},domProps:{value:t.dob},on:{change:function(e){t.dob=e.target.value}}}),s("label",{attrs:{for:"signin_dob"}},[t._v("Дата рождения")])]),s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("place")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.select,expression:"select"}],ref:"select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.select=e.target.multiple?s:s[0]}}},t._l(t.countries,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0),s("label",[t._v("Страна")])]),s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("email")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{id:"signin_email",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{attrs:{for:"signin_email"}},[t._v("Эл. почта")])]),s("div",{staticClass:"input-field col s12"},[s("i",{staticClass:"material-icons prefix"},[t._v("lock")]),s("i",{staticClass:"material-icons prefix prefix-right grey-text",on:{click:function(e){t.showPassword=!t.showPassword}}},[t._v(t._s(t.togglePassword))]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{id:"signin_password",type:t.showPassword?"text":"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{attrs:{for:"signin_password"}},[t._v("Пароль")])]),t.authCode?s("p",{staticClass:"center red-text"},[t._v(" "+t._s(t._f("convertAuthCode")(t.authCode))+" ")]):t._e(),s("div",{staticClass:"input-field col s12"},[s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit"}},[t._v(" Присоединиться ")]),s("a",{staticClass:"btn-flat ttn",on:{click:t.toggleForm}},[t._v("Войти в акканут")])])])])},vt=[],gt=(s("07ac"),{name:"SigninForm",data:function(){return{alias:"",dob:"",email:"",password:"",showPassword:!1,aliasRule:"auth/alias-format",select:"Россия",countries:[]}},methods:Object(o["a"])({},Object(g["b"])(["createUser","isAliasAvailable"]),{},Object(g["d"])(["setAuthCode","setLoading"]),{authUser:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.setLoading(!0),t.setAuthCode(""),t.alias&&t.dob&&t.email&&t.password&&t.select){e.next=6;break}return t.setAuthCode("auth/empty-data"),t.setLoading(!1),e.abrupt("return");case 6:if(t.validAlias(t.alias)){e.next=10;break}return t.setAuthCode("auth/invalid-alias"),t.setLoading(!1),e.abrupt("return");case 10:return e.next=12,t.isAliasAvailable(t.alias);case 12:if(e.sent){e.next=16;break}return t.setAuthCode("auth/alias-already-in-use"),t.setLoading(!1),e.abrupt("return");case 16:s={alias:t.alias,dob:t.dob,country:t.select,email:t.email,password:t.password},t.createUser(s).then((function(){t.setLoading(!1)}));case 18:case"end":return e.stop()}}),e)})))()},validAlias:function(t){var e=/^[a-zA-Z0-9]*$/;return e.test(t)},toggleForm:function(){this.$emit("toggleForm")}}),computed:Object(o["a"])({},Object(g["c"])(["authCode"]),{togglePassword:function(){return this.showPassword?"visibility_on":"visibility_off"}}),created:function(){this.countries=Object.values(s("85fc"))},mounted:function(){C.a.FormSelect.init(this.$refs.select),C.a.Tooltip.init(this.$refs.tooltip),C.a.Datepicker.init(this.$refs.datepicker,{yearRange:[1950,(new Date).getFullYear()],maxDate:new Date,format:"dd.mm.yyyy",i18n:{cancel:"Отменить",done:"Выбрать",months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],monthsShort:["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],weekdays:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],weekdaysShort:["вс","пн","вт","ср","чт","пт","сб"],weekdaysAbbrev:["вс","пн","вт","ср","чт","пт","сб"]}})}}),bt=gt,Ct=Object(f["a"])(bt,ht,vt,!1,null,null,null),jt=Ct.exports,wt={name:"Auth",data:function(){return{login:!0}},components:{LoginForm:mt,SigninForm:jt},methods:Object(o["a"])({},Object(g["d"])(["setAuthCode"]),{toggleForm:function(){this.login=!this.login,this.setAuthCode("")}}),mounted:function(){C.a.updateTextFields()}},_t=wt,Ut=(s("c9b5"),Object(f["a"])(_t,ot,ct,!1,null,null,null)),xt=Ut.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isComponentLoading?s("ComponentLoader"):s("div",{staticClass:"profile",class:{"first-user":t.userData.isFirstUser}},[s("div",{staticClass:"card profile-card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"profile-image"},[s("div",{staticClass:"profile-image-wrap"},[s("img",{attrs:{src:t.profilePhoto}}),t.isCurrentUser?s("div",{staticClass:"image-upload flex-center modal-trigger",attrs:{href:"#profile-upload"}},[s("i",{staticClass:"material-icons medium"},[t._v("photo_camera")])]):t._e()]),t.isCurrentUser?t._e():s("div",{staticClass:"profile-actions"},[s("router-link",{attrs:{to:{name:"Chat",params:{alias:t.userData.alias}}}},[s("button",{staticClass:"btn-small btn-actions"},[s("i",{staticClass:"material-icons right"},[t._v("message")]),t._v(" Чат ")])]),t.isSubscribed?s("button",{staticClass:"grey btn-small btn-actions",on:{click:function(e){return t.manageFollow(!1)}}},[s("i",{staticClass:"material-icons right"},[t._v("clear")]),t._v(" Отписаться ")]):s("button",{staticClass:"btn-small btn-actions",on:{click:function(e){return t.manageFollow(!0)}}},[s("i",{staticClass:"material-icons right"},[t._v("check")]),t._v(" Подписаться ")])],1)]),s("div",{staticClass:"profile-content"},[s("strong",{staticClass:"profile-title"},[t._v(t._s(t.userData.alias))]),t.statusEdit?s("form",{on:{submit:function(e){return e.preventDefault(),t.saveInfo(e)}}},[s("div",{staticClass:"input-field post-field"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.status,expression:"status",modifiers:{trim:!0}}],ref:"textarea",staticClass:"materialize-textarea",domProps:{value:t.status},on:{input:function(e){e.target.composing||(t.status=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("label",{attrs:{for:"new-post"}})]),s("div",{staticClass:"input-field post-field"},[s("button",{staticClass:"btn-small"},[t._v("Сохранить")])])]):s("p",{staticClass:"profile-status",class:{"profile-status-edit":t.isCurrentUser},on:{click:t.prepareEdit}},[t.isCurrentUser?s("i",{staticClass:"material-icons"},[t._v("edit")]):t._e(),s("span",{domProps:{innerHTML:t._s(t.userData.info||t.dummyInfo)}})]),t.userData.isFirstUser?s("p",{staticClass:"profile-info red-text"},[s("i",{staticClass:"material-icons"},[t._v("star")]),t._v("нулевой пациент ")]):t._e(),s("p",{staticClass:"profile-info grey-text"},[s("i",{staticClass:"material-icons"},[t._v("person_outline")]),t._v(t._s(t._f("formatDate")(t.userData.createdAt))+" ")]),s("p",{staticClass:"profile-info grey-text"},[s("i",{staticClass:"material-icons"},[t._v("cake")]),t._v(t._s(t.userData.dob))]),s("p",{staticClass:"profile-info grey-text"},[s("i",{staticClass:"material-icons"},[t._v("place")]),t._v(t._s(t.userData.country))]),s("p",{staticClass:"profile-info grey-text"},[s("i",{staticClass:"material-icons"},[t._v("email")]),t._v(t._s(t.userData.email))])])])]),t.isCurrentUser?s("CreatePost",{attrs:{profileUserData:Object.assign({},t.profileUserData,{photoUrl:t.userData.photoUrl})}}):t._e(),t._l(t.posts,(function(e){return s("div",{key:e.id,staticClass:"card"},[s("Post",{attrs:{isCurrentUser:t.isCurrentUser,post:Object.assign({},e,{photoUrl:t.userData.photoUrl})}})],1)}))],2),s("div",{ref:"profile-upload",staticClass:"modal profile-upload",attrs:{id:"profile-upload"}},[s("div",{staticClass:"modal-content"},[s("p",{staticClass:"flex-center grey-text text-darken-1"},[s("i",{staticClass:"material-icons"},[t._v("info_outline")]),t._v(" Загрузите изображение в формате "+t._s(t.allowedImages.join(" или "))+" размером не более "+t._s(t.maxFileSizeKb)+" Кб ")]),t.uploadError?s("p",{staticClass:"red-text"},[t._v("Фото не отвечает требованиям")]):t._e(),s("button",{staticClass:"btn",on:{click:function(e){return t.$refs.file.click()}}},[t._v("Загрузить")]),s("input",{ref:"file",attrs:{type:"file"},on:{change:t.pickupProfileImage}})])])],1)},Ot=[],yt=(s("ac1f"),s("5319"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card create-post"},[s("div",{staticClass:"card-content"},[s("form",{ref:"post-form",staticClass:"flex-center"},[s("Badge",{attrs:{alias:t.profileUserData.alias,photoUrl:t.profileUserData.photoUrl,invertColor:!0}}),s("div",{staticClass:"input-field post-field"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.newPost,expression:"newPost",modifiers:{trim:!0}}],staticClass:"materialize-textarea",attrs:{id:"new-post"},domProps:{value:t.newPost},on:{input:function(e){e.target.composing||(t.newPost=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("label",{attrs:{for:"new-post"}},[t._v("Что у тебя нового?")])]),s("a",{staticClass:"btn-flat",attrs:{disabled:!t.newPost.length},on:{click:t.sendPost}},[s("i",{staticClass:"material-icons"},[t._v("send")])])],1)])])}),Pt=[],kt={name:"CreatePost",props:["profileUserData"],data:function(){return{newPost:""}},components:{Badge:D},methods:Object(o["a"])({},Object(g["b"])(["addPost"]),{},Object(g["d"])(["setLoading"]),{sendPost:function(){var t=this;this.setLoading(!0);var e={content:this.newPost.replace(/\n\r?/g,"<br />"),user:this.profileUserData.alias};this.addPost(e).then((function(){t.newPost="",t.$refs["post-form"].reset(),C.a.textareaAutoResize(t.$refs["post-form"].elements[0]),t.setLoading(!1)}))}}),mounted:function(){C.a.updateTextFields()}},Lt=kt,At=(s("13ed"),Object(f["a"])(Lt,yt,Pt,!1,null,null,null)),St=At.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-content"},[s("div",{staticClass:"post-header flex-center"},[s("div",{staticClass:"post-header-badge"},[t.post?s("Badge",{attrs:{alias:t.post.alias,photoUrl:t.post.photoUrl,invertColor:!0}}):t._e()],1),s("div",{staticClass:"post-header-info"},[s("strong",[t._v(t._s(t.post.alias))]),s("p",{staticClass:"post-header-time"},[t._v(t._s(t._f("formatDatetimeFromNow")(t.post.createdAt)))])]),t.isCurrentUser?s("div",{staticClass:"post-actions"},[s("a",{staticClass:"post-delete waves-effect waves-teal btn-flat",attrs:{"data-target":"post-actions"+t.post.id}},[s("i",{staticClass:"material-icons"},[t._v("more_vert")])]),s("ul",{staticClass:"dropdown-content",attrs:{id:"post-actions"+t.post.id}},[s("li",[s("a",{on:{click:t.deletePost}},[s("i",{staticClass:"material-icons"},[t._v("delete")]),t._v("Удалить")])])])]):t._e()]),s("p",{domProps:{innerHTML:t._s(t.post.content)}})])},Et=[],Rt={name:"Post",props:["post","isCurrentUser"],components:{Badge:D},methods:Object(o["a"])({},Object(g["b"])(["removePost"]),{},Object(g["d"])(["setLoading"]),{deletePost:function(){var t=this;this.setLoading(!0),this.removePost(this.post.id).then((function(){t.setLoading(!1)}))}}),mounted:function(){C.a.Dropdown.init(document.querySelectorAll(".post-delete"),{coverTrigger:!1,constrainWidth:!1})}},It=Rt,Ft=(s("cb9c"),Object(f["a"])(It,Mt,Et,!1,null,null,null)),zt=Ft.exports,$t={name:"Profile",data:function(){return{isComponentLoading:!1,statusEdit:!1,status:"",modal:null,uploadError:!1,maxFileSizeKb:100,allowedImages:["image/png","image/jpeg"],dummyInfo:"Здесь будет какой-нибудь дурацкий текст до тех пор, пока я не расскажу о себе всему миру!!!"}},components:{CreatePost:St,Post:zt,ComponentLoader:V},methods:Object(o["a"])({},Object(g["b"])(["manageSubscription","listenCurrentUserData","fetchProfileUserData","uploadProfileImage","updateInfo","fetchPosts"]),{},Object(g["d"])(["setLoading"]),{manageFollow:function(t){var e={user:this.currentUserData,followedUser:this.userData.alias,add:t};this.manageSubscription(e)},prepareEdit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isCurrentUser){e.next=5;break}return t.statusEdit=!0,e.next=4,t.$nextTick();case 4:C.a.textareaAutoResize(document.querySelector("textarea"));case 5:case"end":return e.stop()}}),e)})))()},saveInfo:function(){var t=this;this.setLoading(!0);var e={info:this.status.replace(/\n\r?/g,"<br />"),user:this.profileUserData.alias};this.statusEdit=!1,this.updateInfo(e).then((function(){t.statusEdit=!1,t.setLoading(!1)}))},pickupProfileImage:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var a,r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t.target.files[0],e.uploadError=!1,a&&a.size&&!(a.size/1024>100)&&e.allowedImages.includes(a.type)){s.next=5;break}return e.uploadError=!0,s.abrupt("return",!1);case 5:return r={contentType:a.type},e.modal.close(),e.setLoading(!0),n={file:a,metadata:r,user:e.profileUserData.alias},s.next=11,e.uploadProfileImage(n);case 11:e.setLoading(!1);case 12:case"end":return s.stop()}}),s)})))()}}),computed:Object(o["a"])({},Object(g["c"])(["profileUserData","currentUserData","posts"]),{isCurrentUser:function(){return this.profileUserData.alias===this.currentUserData.alias},isSubscribed:function(){var t=Object.values(this.currentUserData.subscriptions);return t.includes(this.userData.alias)},userData:function(){return this.profileUserData.alias===this.currentUserData.alias?this.currentUserData:this.profileUserData},profilePhoto:function(){return this.userData.photoUrl?this.userData.photoUrl:s("320c")}}),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isComponentLoading=!0,t.modal=C.a.Modal.init(t.$refs["profile-upload"]),s=t.$route.params.alias,t.listenCurrentUserData(t.currentUserData.alias),e.next=6,t.fetchProfileUserData(s);case 6:return e.next=8,t.fetchPosts([t.profileUserData]);case 8:t.status=t.userData.info,t.isComponentLoading=!1;case 10:case"end":return e.stop()}}),e)})))()}},Nt=$t,Tt=(s("6346"),Object(f["a"])(Nt,Dt,Ot,!1,null,null,null)),Bt=Tt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isComponentLoading?s("ComponentLoader"):s("div",{staticClass:"home"},[s("CreatePost",{attrs:{profileUserData:Object.assign({},t.currentUserData,{photoUrl:t.currentUserData.photoUrl})}}),t._l(t.posts,(function(e){return s("div",{key:e.id,staticClass:"card"},[s("Post",{attrs:{isCurrentUser:e.alias===t.currentUserData.alias,post:Object.assign({},e,{photoUrl:e.photoUrl})}})],1)}))],2)],1)},Ht=[],Kt=s("2909"),Yt={name:"Home",components:{CreatePost:St,Post:zt,ComponentLoader:V},data:function(){return{isComponentLoading:!1}},methods:Object(o["a"])({},Object(g["b"])(["fetchPosts","fetchUsers"])),computed:Object(o["a"])({},Object(g["c"])(["currentUserData","posts"])),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isComponentLoading=!0,s=[],s.push(t.currentUserData.alias),t.currentUserData.subscriptions.length&&s.push.apply(s,Object(Kt["a"])(t.currentUserData.subscriptions)),e.next=6,t.fetchUsers(s);case 6:return a=e.sent,e.next=9,t.fetchPosts(a);case 9:t.isComponentLoading=!1;case 10:case"end":return e.stop()}}),e)})))()}},Wt=Yt,Zt=Object(f["a"])(Wt,Gt,Ht,!1,null,null,null),Vt=Zt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"users"},[t.isComponentLoading?a("ComponentLoader"):a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[t.users.length?a("UsersList",{attrs:{users:t.users,badgeSize:100,showIcon:!0}}):a("div",{staticClass:"users-empty flex-center center-align"},[a("img",{attrs:{src:s("cc95"),alt:""}}),a("h6",[t._v("Других пользователей пока нет. Вы нулевой пациент")])])],1)])],1)},qt=[],Xt={name:"Users",components:{ComponentLoader:V,UsersList:G},data:function(){return{users:[],isComponentLoading:!1}},methods:Object(o["a"])({},Object(g["b"])(["fetchUsers"])),computed:Object(o["a"])({},Object(g["c"])(["currentUserData"])),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isComponentLoading=!0,e.next=3,t.fetchUsers([]);case 3:t.users=e.sent,t.users=t.users.filter((function(e){return e.alias!==t.currentUserData.alias})),t.isComponentLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}},Qt=Xt,te=(s("4cab"),Object(f["a"])(Qt,Jt,qt,!1,null,null,null)),ee=te.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isComponentLoading?a("ComponentLoader"):a("div",{staticClass:"chat card"},[a("div",{staticClass:"card-content"},[t.messages.length?a("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{smooth:!0,notSmoothOnInit:!0},expression:"{ smooth: true, notSmoothOnInit: true }"}],staticClass:"messages"},t._l(t.messages,(function(e){return a("div",{key:e.id,staticClass:"message",class:{incoming:t.isIncomingMessage(e)}},[a("div",{staticClass:"message-content"},[t.isIncomingMessage(e)?t._e():a("p",{staticClass:"message-actions right-align",on:{click:function(s){return t.deleteMessage(e.id)}}},[t._v(" Удалить ")]),a("p",{staticClass:"message-text"},[t._v(t._s(e.message))]),a("p",{staticClass:"message-time right-align"},[t._v(t._s(t._f("formatDatetime")(e.createdAt)))])])])})),0):a("div",{staticClass:"chat-empty flex-center"},[a("img",{attrs:{src:s("0f6d"),alt:""}}),a("p",[t._v("Сообщений пока нет")])]),a("form",{ref:"message-form",staticClass:"flex-center message-form",on:{submit:function(e){return e.preventDefault(),t.submitMessage(e)}}},[a("div",{staticClass:"input-field message-field"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message,expression:"message",modifiers:{trim:!0}}],attrs:{id:"new-message",type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("label",{attrs:{for:"new-message"}},[t._v("Сообщение")])]),a("a",{staticClass:"btn-flat",attrs:{disabled:!t.message.length},on:{click:t.submitMessage}},[a("i",{staticClass:"material-icons"},[t._v("send")])])])])])],1)},ae=[],re={name:"Chat",data:function(){return{message:"",isComponentLoading:!1}},components:{ComponentLoader:V},computed:Object(o["a"])({},Object(g["c"])(["currentUserData","messages"])),methods:Object(o["a"])({},Object(g["b"])(["sendMessage","fetchMessages","removeMessage"]),{isIncomingMessage:function(t){return t.from!==this.currentUserData.alias},submitMessage:function(){if(this.message){var t={message:this.message,from:this.currentUserData.alias,to:this.$route.params.alias};this.message="",this.$refs["message-form"].reset(),this.sendMessage(t).then((function(){C.a.updateTextFields()}))}},deleteMessage:function(t){this.removeMessage(t)}}),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isComponentLoading=!0,C.a.updateTextFields(),s={from:t.currentUserData.alias,to:t.$route.params.alias},e.next=5,t.fetchMessages(s);case 5:t.isComponentLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}},ne=re,ie=(s("9c66"),Object(f["a"])(ne,se,ae,!1,null,null,null)),oe=ie.exports;r["a"].use(rt["a"]);var ce=[{path:"/",name:"Home",component:Vt,meta:{requireAuth:!0}},{path:"/user/:alias",name:"Profile",component:Bt,meta:{requireAuth:!0}},{path:"/users",name:"Users",component:ee,meta:{requireAuth:!0}},{path:"/chat/:alias",name:"Chat",component:oe,meta:{requireAuth:!0}},{path:"/auth",name:"Auth",component:xt,beforeEnter:function(t,e,s){var a=it.a.auth().currentUser;a?s({name:"Home"}):s()}}],le=new rt["a"]({mode:"history",base:"/",routes:ce});le.beforeEach((function(t,e,s){var a=it.a.auth().currentUser,r=t.matched.some((function(t){return t.meta.requireAuth}));r&&!a?s({name:"Auth"}):s()}));var ue=le,de=s("59ca"),fe=s.n(de),pe={state:{authCode:""},mutations:{setAuthCode:function(t,e){t.authCode=e}},actions:{createUser:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function s(){var a,r,n,i,o,c,l,u,d,f,p,m,h,v;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,r=e.alias,n=e.dob,i=e.country,o=e.email,c=e.password,s.prev=2,s.next=5,fe.a.auth().createUserWithEmailAndPassword(o,c);case 5:return l=s.sent,a("setAuthCode",""),l.user.updateProfile({displayName:r}),u={uid:l.user.uid,alias:r,email:o,dob:n,country:i,info:"",photoUrl:"",subscriptions:"",createdAt:Date.now()},a("setCurrentUserData",u),d=fe.a.firestore(),f=d.batch(),p=fe.a.firestore.FieldValue.increment(1),m=d.collection("stats").doc("users"),h=d.collection("users").doc(r),f.set(m,{userCount:p},{merge:!0}),f.set(h,u),s.next=19,f.commit();case 19:return s.next=21,m.get();case 21:v=s.sent.data().userCount,1===v&&h.set({isFirstUser:!0},{merge:!0}),ue.push({name:"Home"}),s.next=29;break;case 26:s.prev=26,s.t0=s["catch"](2),a("setAuthCode",s.t0.code);case 29:case"end":return s.stop()}}),s,null,[[2,26]])})))()},loginUser:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function s(){var a,r,n,i,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,r=t.dispatch,n=e.email,i=e.password,s.prev=2,a("setAuthCode",""),s.next=6,fe.a.auth().signInWithEmailAndPassword(n,i);case 6:return o=s.sent,s.next=9,r("fetchCurrentUserData",o.user.uid);case 9:ue.push({name:"Home"}),s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](2),a("setAuthCode",s.t0.code);case 15:case"end":return s.stop()}}),s,null,[[2,12]])})))()},logoutUser:function(){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.a.auth().signOut();case 3:ue.push({name:"Auth"}),t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},getters:{authCode:function(t){return t.authCode}}},me=(s("4160"),s("159b"),{state:{currentUserData:{},profileUserData:{}},getters:{currentUserData:function(t){return t.currentUserData},userSubscriptions:function(t){return t.currentUserData.subscriptions},profileUserData:function(t){return t.profileUserData}},mutations:{setCurrentUserData:function(t,e){t.currentUserData=e},setProfileUserData:function(t,e){t.profileUserData=e}},actions:{fetchCurrentUserData:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,s.abrupt("return",fe.a.firestore().collection("users").where("uid","==",e).get().then((function(t){a("setCurrentUserData",t.docs[0].data())})));case 2:case"end":return s.stop()}}),s)})))()},listenCurrentUserData:function(t,e){var s=t.commit;fe.a.firestore().collection("users").where("alias","==",e).onSnapshot((function(t){s("setCurrentUserData",t.docChanges()[0].doc.data())}))},fetchProfileUserData:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,s.next=3,fe.a.firestore().collection("users").where("alias","==",e).get();case 3:r=s.sent,a("setProfileUserData",r.docs[0].data());case 5:case"end":return s.stop()}}),s)})))()},isAliasAvailable:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fe.a.firestore().collection("users").where("alias","==",e).get();case 2:return s=t.sent,t.abrupt("return",!s.docs.length);case 4:case"end":return t.stop()}}),t)})))()},fetchUsers:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=[],!e.length){t.next=6;break}return t.next=4,fe.a.firestore().collection("users").where("alias","in",e).get().then((function(t){t.docs.forEach((function(t){s.push(t.data())}))}));case 4:t.next=8;break;case 6:return t.next=8,fe.a.firestore().collection("users").get().then((function(t){t.docs.forEach((function(t){s.push(t.data())}))}));case 8:return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))()},uploadProfileImage:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function s(){var a,r,n,i,o,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.dispatch,r=e.file,n=e.metadata,i=e.user,s.next=4,fe.a.storage().ref().child("images/"+i).put(r,n);case 4:return o=s.sent,s.next=7,o.ref.getDownloadURL();case 7:return c=s.sent,s.next=10,a("updatePhotoUrl",{url:c,user:i});case 10:case"end":return s.stop()}}),s)})))()},updatePhotoUrl:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.url,a=e.user,t.next=3,fe.a.firestore().collection("users").doc(a).update({photoUrl:s});case 3:case"end":return t.stop()}}),t)})))()},updateInfo:function(t,e){var s=e.info,a=e.user;return fe.a.firestore().collection("users").doc(a).update({info:s})},manageSubscription:function(t,e){var s=e.user,a=e.followedUser,r=e.add,n=Object.values(s.subscriptions);return r?n.push(a):n=n.filter((function(t){return t!==a})),fe.a.firestore().collection("users").doc(s.alias).update({subscriptions:n})}}}),he=(s("7db0"),s("d81d"),s("d3b7"),{state:{posts:[],photos:[]},getters:{posts:function(t){return t.posts},photos:function(t){return t.photos}},mutations:{setPosts:function(t,e){t.posts=e}},actions:{fetchPosts:function(t,e){var s=t.commit;return new Promise((function(t){var a=[],r=e.map((function(t){return t.alias}));fe.a.firestore().collection("posts").orderBy("createdAt").onSnapshot((function(n){n.docChanges().forEach((function(t){var s=t.doc.data();r.includes(s.alias)&&("added"===t.type?a.unshift(Object(o["a"])({},s,{id:t.doc.id,photoUrl:e.find((function(t){return t.alias===s.alias})).photoUrl})):"removed"===t.type&&(a=a.filter((function(e){return e.id!==t.doc.id}))))})),s("setPosts",a),t()}))}))},addPost:function(t,e){var s=e.content,a=e.user;return fe.a.firestore().collection("posts").add({alias:a,content:s,createdAt:Date.now()})},removePost:function(t,e){return fe.a.firestore().collection("posts").doc(e).delete()}}}),ve={state:{messages:[]},getters:{messages:function(t){return t.messages}},mutations:{setMessages:function(t,e){t.messages=e}},actions:{sendMessage:function(t,e){var s=e.message,a=e.from,r=e.to;return fe.a.firestore().collection("messages").add({from:a,to:r,message:s,createdAt:Date.now()})},fetchMessages:function(t,e){var s=t.commit,a=e.from,r=e.to;return new Promise((function(t){var e=[];fe.a.firestore().collection("messages").orderBy("createdAt").onSnapshot((function(n){n.docChanges().forEach((function(t){var s=t.doc.data(),n=[a,r];n.includes(s.to)&&n.includes(s.from)&&("added"===t.type?e.push(Object(o["a"])({},s,{id:t.doc.id})):"removed"===t.type&&(e=e.filter((function(e){return e.id!==t.doc.id}))))})),s("setMessages",e),t()}))}))},removeMessage:function(t,e){return fe.a.firestore().collection("messages").doc(e).delete()}}};r["a"].use(g["a"]);var ge=new g["a"].Store({state:{isLoading:!1},mutations:{setLoading:function(t,e){t.isLoading=e}},getters:{isLoading:function(t){return t.isLoading}},modules:{auth:pe,user:me,post:he,chat:ve}}),be={"auth/empty-data":"Заполните все поля","auth/invalid-email":"Некорректный адрес эл. почты","auth/wrong-password":"Неверный пароль","auth/user-not-found":"Такого пользователя нет","auth/too-many-requests":"Превышено число неудачных попыток входа","auth/weak-password":"Пароль должен быть не менее 6 символов","auth/email-already-in-use":"Такой адрес эл. почты уже используется","auth/alias-already-in-use":"Такой псевдоним уже используется","auth/invalid-alias":"Некорректный псевдоним","auth/alias-format":"Разрешено использовать только латинские буквы и цифры","auth/user-disabled":"Пользователь заблокирован"};function Ce(t){return be[t]||t}var je=s("c1df"),we=s.n(je);s("898b");we.a.locale("ru");var _e,Ue=function(t){return we()(t).format("DD.MM.YYYY")},xe=function(t){return we()(t).format("DD MMM YYYY HH:mm")},De=function(t){return we()(t).fromNow()},Oe=s("123d"),ye=s.n(Oe);s("8266"),s("619b"),s("569e");r["a"].config.productionTip=!1,r["a"].use(ye.a),r["a"].filter("convertAuthCode",Ce),r["a"].filter("formatDate",Ue),r["a"].filter("formatDatetime",xe),r["a"].filter("formatDatetimeFromNow",De),it.a.initializeApp({apiKey:"AIzaSyBtYUCZODtlhMj7docRlEXeywnz6mHzOek",authDomain:"v-social-210d0.firebaseapp.com",databaseURL:"https://v-social-210d0.firebaseio.com",projectId:"v-social-210d0",storageBucket:"v-social-210d0.appspot.com",messagingSenderId:"8131849473",appId:"1:8131849473:web:f9b831bbc495a391a5bf00"}),it.a.auth().onAuthStateChanged(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,ge.dispatch("fetchCurrentUserData",e.uid);case 3:_e||(_e=new r["a"]({router:ue,store:ge,render:function(t){return t(at)}}).$mount("#app"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},6346:function(t,e,s){"use strict";var a=s("4dc3"),r=s.n(a);r.a},"69e5":function(t,e,s){"use strict";var a=s("276c"),r=s.n(a);r.a},"71b1":function(t,e,s){"use strict";var a=s("d850"),r=s.n(a);r.a},"769e":function(t,e,s){},"7e46":function(t,e,s){"use strict";var a=s("d8a2"),r=s.n(a);r.a},8264:function(t,e,s){},"85fc":function(t){t.exports=JSON.parse('{"RU":"Россия","AU":"Австралия","AT":"Австрия","AZ":"Азербайджан","AX":"Аландские о-ва","AL":"Албания","DZ":"Алжир","AS":"Американское Самоа","AI":"Ангилья","AO":"Ангола","AD":"Андорра","AQ":"Антарктида","AG":"Антигуа и Барбуда","AR":"Аргентина","AM":"Армения","AW":"Аруба","AF":"Афганистан","BS":"Багамы","BD":"Бангладеш","BB":"Барбадос","BH":"Бахрейн","BY":"Беларусь","BZ":"Белиз","BE":"Бельгия","BJ":"Бенин","BM":"Бермудские о-ва","BG":"Болгария","BO":"Боливия","BQ":"Бонэйр, Синт-Эстатиус и Саба","BA":"Босния и Герцеговина","BW":"Ботсвана","BR":"Бразилия","IO":"Британская территория в Индийском океане","BN":"Бруней-Даруссалам","BF":"Буркина-Фасо","BI":"Бурунди","BT":"Бутан","VU":"Вануату","VA":"Ватикан","GB":"Великобритания","HU":"Венгрия","VE":"Венесуэла","VG":"Виргинские о-ва (Великобритания)","VI":"Виргинские о-ва (США)","UM":"Внешние малые о-ва (США)","TL":"Восточный Тимор","VN":"Вьетнам","GA":"Габон","HT":"Гаити","GY":"Гайана","GM":"Гамбия","GH":"Гана","GP":"Гваделупа","GT":"Гватемала","GN":"Гвинея","GW":"Гвинея-Бисау","DE":"Германия","GG":"Гернси","GI":"Гибралтар","HN":"Гондурас","HK":"Гонконг (САР)","GD":"Гренада","GL":"Гренландия","GR":"Греция","GE":"Грузия","GU":"Гуам","DK":"Дания","JE":"Джерси","DJ":"Джибути","DG":"Диего-Гарсия","DM":"Доминика","DO":"Доминиканская Республика","EG":"Египет","ZM":"Замбия","EH":"Западная Сахара","ZW":"Зимбабве","IL":"Израиль","IN":"Индия","ID":"Индонезия","JO":"Иордания","IQ":"Ирак","IR":"Иран","IE":"Ирландия","IS":"Исландия","ES":"Испания","IT":"Италия","YE":"Йемен","CV":"Кабо-Верде","KZ":"Казахстан","KH":"Камбоджа","CM":"Камерун","CA":"Канада","IC":"Канарские о-ва","QA":"Катар","KE":"Кения","CY":"Кипр","KG":"Киргизия","KI":"Кирибати","CN":"Китай","KP":"КНДР","CC":"Кокосовые о-ва","CO":"Колумбия","KM":"Коморы","CG":"Конго - Браззавиль","CD":"Конго - Киншаса","XK":"Косово","CR":"Коста-Рика","CI":"Кот-д’Ивуар","CU":"Куба","KW":"Кувейт","CW":"Кюрасао","LA":"Лаос","LV":"Латвия","LS":"Лесото","LR":"Либерия","LB":"Ливан","LY":"Ливия","LT":"Литва","LI":"Лихтенштейн","LU":"Люксембург","MU":"Маврикий","MR":"Мавритания","MG":"Мадагаскар","YT":"Майотта","MO":"Макао (САР)","MW":"Малави","MY":"Малайзия","ML":"Мали","MV":"Мальдивы","MT":"Мальта","MA":"Марокко","MQ":"Мартиника","MH":"Маршалловы Острова","MX":"Мексика","MZ":"Мозамбик","MD":"Молдова","MC":"Монако","MN":"Монголия","MS":"Монтсеррат","MM":"Мьянма (Бирма)","NA":"Намибия","NR":"Науру","NP":"Непал","NE":"Нигер","NG":"Нигерия","NL":"Нидерланды","NI":"Никарагуа","NU":"Ниуэ","NZ":"Новая Зеландия","NC":"Новая Каледония","NO":"Норвегия","AC":"о-в Вознесения","IM":"о-в Мэн","NF":"о-в Норфолк","CX":"о-в Рождества","SH":"о-в Св. Елены","PN":"о-ва Питкэрн","TC":"о-ва Тёркс и Кайкос","AE":"ОАЭ","OM":"Оман","KY":"Острова Кайман","CK":"Острова Кука","PK":"Пакистан","PW":"Палау","PS":"Палестинские территории","PA":"Панама","PG":"Папуа — Новая Гвинея","PY":"Парагвай","PE":"Перу","PL":"Польша","PT":"Португалия","XB":"псевдо-Bidi","XA":"псевдоакценты","PR":"Пуэрто-Рико","KR":"Республика Корея","RE":"Реюньон","RW":"Руанда","RO":"Румыния","SV":"Сальвадор","WS":"Самоа","SM":"Сан-Марино","ST":"Сан-Томе и Принсипи","SA":"Саудовская Аравия","MK":"Северная Македония","MP":"Северные Марианские о-ва","SC":"Сейшельские Острова","BL":"Сен-Бартелеми","MF":"Сен-Мартен","PM":"Сен-Пьер и Микелон","SN":"Сенегал","VC":"Сент-Винсент и Гренадины","KN":"Сент-Китс и Невис","LC":"Сент-Люсия","RS":"Сербия","EA":"Сеута и Мелилья","SG":"Сингапур","SX":"Синт-Мартен","SY":"Сирия","SK":"Словакия","SI":"Словения","US":"Соединенные Штаты","SB":"Соломоновы Острова","SO":"Сомали","SD":"Судан","SR":"Суринам","SL":"Сьерра-Леоне","TJ":"Таджикистан","TH":"Таиланд","TW":"Тайвань","TZ":"Танзания","TG":"Того","TK":"Токелау","TO":"Тонга","TT":"Тринидад и Тобаго","TA":"Тристан-да-Кунья","TV":"Тувалу","TN":"Тунис","TM":"Туркменистан","TR":"Турция","UG":"Уганда","UZ":"Узбекистан","UA":"Украина","WF":"Уоллис и Футуна","UY":"Уругвай","FO":"Фарерские о-ва","FM":"Федеративные Штаты Микронезии","FJ":"Фиджи","PH":"Филиппины","FI":"Финляндия","FK":"Фолклендские о-ва","FR":"Франция","GF":"Французская Гвиана","PF":"Французская Полинезия","TF":"Французские Южные территории","HR":"Хорватия","CF":"Центрально-Африканская Республика","TD":"Чад","ME":"Черногория","CZ":"Чехия","CL":"Чили","CH":"Швейцария","SE":"Швеция","SJ":"Шпицберген и Ян-Майен","LK":"Шри-Ланка","EC":"Эквадор","GQ":"Экваториальная Гвинея","ER":"Эритрея","SZ":"Эсватини","EE":"Эстония","ET":"Эфиопия","GS":"Южная Георгия и Южные Сандвичевы о-ва","ZA":"Южно-Африканская Республика","SS":"Южный Судан","JM":"Ямайка","JP":"Япония"}')},9267:function(t,e,s){},9279:function(t,e,s){},"9be6":function(t,e,s){"use strict";var a=s("aa54"),r=s.n(a);r.a},"9c66":function(t,e,s){"use strict";var a=s("8264"),r=s.n(a);r.a},a266:function(t,e,s){t.exports=s.p+"img/logo-white.63f94c12.svg"},aa54:function(t,e,s){},bf8d:function(t,e,s){},c494:function(t,e,s){},c9b5:function(t,e,s){"use strict";var a=s("9279"),r=s.n(a);r.a},cb9c:function(t,e,s){"use strict";var a=s("415b"),r=s.n(a);r.a},cc95:function(t,e,s){t.exports=s.p+"img/users-empty.7f7f097f.svg"},d850:function(t,e,s){},d8a2:function(t,e,s){}});
//# sourceMappingURL=app.d3a0086e.js.map